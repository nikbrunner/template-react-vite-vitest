# Review: Todo List with Filters - 2026-01-28

**Score:** 6/10
**Time:** 60 minutes

## What Worked Well

- Clean component separation: `TodoList`, `TodoItem`, `useFilter`, `types/todos.ts`
- Solid TypeScript throughout with proper interfaces
- `crypto.randomUUID()` for IDs - modern, clean choice
- Functional state updates (`setTodos(prev => ...)`) - correct pattern
- Form handling with `onSubmit` and `e.preventDefault()`
- Input clears after adding todo
- Filter logic extracted to custom hook
- CSS Grid layout for TodoItem is nice

## Issues Found

### Issue 1: No Tests (Critical - 30% of grade)

No `TodoList.test.tsx` was created. The existing `App.test.tsx` still has the template tests for a counter app.

**Required tests were:**
- Can add a new todo
- Can toggle todo completion
- Can delete a todo
- Filters work correctly
- Counter shows correct number

### Issue 2: Event Propagation Bug

```tsx
<li className="TodoItem" onClick={() => props.onComplete(props.todo)}>
  {/* ... */}
  <button onClick={() => props.onDelete(props.todo)}>âŒ«</button>
</li>
```

**Problem:** Clicking delete also triggers the `li`'s onClick, toggling the todo before deleting it.

**Fix:**
```tsx
<button
  onClick={(e) => {
    e.stopPropagation();
    props.onDelete(props.todo);
  }}
>
```

### Issue 3: useFilter Naming Convention

```tsx
export function useFilter(todos: Todo[], filter: Filter): Todo[] {
  switch (filter) { /* ... */ }
}
```

**Problem:** This doesn't use any React hooks (useState, useEffect, etc.). It's just a pure function. The `use*` prefix is a React convention meaning "this function uses React hooks and follows hook rules."

**Fix:** Either rename to `filterTodos()` or make it a proper hook:
```tsx
// Option A: Just a utility function
export function filterTodos(todos: Todo[], filter: Filter): Todo[] { ... }

// Option B: Actual hook with useMemo
export function useFilteredTodos(todos: Todo[], filter: Filter): Todo[] {
  return useMemo(() => {
    switch (filter) { /* ... */ }
  }, [todos, filter]);
}
```

### Issue 4: Select vs Buttons for Filter

Used `<select>` instead of buttons. Not wrong, but the requirement mentioned "Active filter button should be visually highlighted" - implies buttons were expected.

## Patterns to Practice

- **Testing with RTL:** `render()`, `screen.getByRole()`, `userEvent.click()`, `expect().toBeInTheDocument()`
- **Event propagation:** `e.stopPropagation()` when nested clickable elements
- **Hook naming convention:** Only prefix with `use` if it actually uses React hooks
- **Conditional CSS classes:** `className={todo.completed ? styles.completed : ''}`

## Interview Readiness

- [ ] Ready to move on
- [x] Needs one more attempt
- [ ] Review fundamentals first

## Score Breakdown

| Criterion | Points | Notes |
|-----------|--------|-------|
| Functionality | 25/30 | CRUD works, filter works, count works. Emoji provides visual distinction. Event propagation bug |
| Test Coverage | 0/30 | No tests written |
| Code Quality | 18/20 | Clean separation, good TS, useFilter naming convention |
| CSS/Styling | 17/20 | Functional, emoji provides visual distinction, used select instead of buttons |

## Recommended Next Steps

1. **Priority: Write the tests.** This was 30% and you got 0. Practice the RTL patterns:
   ```tsx
   test('can add a new todo', async () => {
     const user = userEvent.setup();
     render(<App />);

     await user.type(screen.getByRole('textbox'), 'Buy milk');
     await user.keyboard('{Enter}');

     expect(screen.getByText('Buy milk')).toBeInTheDocument();
   });
   ```

2. **Redo this exercise** with tests written FIRST (TDD style) - it'll force you to think about the component API

3. Fix the event propagation bug - common interview gotcha
